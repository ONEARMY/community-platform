import{R as p,r as c,j as a}from"./iframe-B_Pp-Kwy.js";import{B as S}from"./Button-Ccd5_aBy.js";import{C as O}from"./CardListItem-DB9fmUhl.js";import{I as b}from"./Icon-CAmEKHNo.js";import{F as v,T as I}from"./theme-ui-components.esm-Bn3cp4D1.js";function E(){return E=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},E.apply(this,arguments)}function k(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,_(e,n)}function _(e,n){return(_=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var j=function(e){function n(){return e.apply(this,arguments)||this}k(n,e);var t=n.prototype;return t.getColumns=function(){var e=this.props,n=e.children,t=e.columnsCount,r=Array.from({length:t},(function(){return[]}));return p.Children.forEach(n,(function(e,n){e&&p.isValidElement(e)&&r[n%t].push(e)})),r},t.renderColumns=function(){var e=this.props.gutter;return this.getColumns().map((function(n,t){return p.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:e}},n.map((function(e){return e})))}))},t.render=function(){var e=this.props,n=e.gutter,t=e.className,r=e.style;return p.createElement("div",{style:E({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:n},r),className:t},this.renderColumns())},n}(p.Component);j.propTypes={},j.defaultProps={columnsCount:3,gutter:"0",className:null,style:{}};var N=1,T=typeof window<"u"?c.useLayoutEffect:c.useEffect,R=function(){var e=c.useState(!1),n=e[0],t=e[1];return T((function(){t(!0)}),[]),n},B=function(){var e=R(),n=c.useState(0),t=n[0],r=n[1],i=c.useCallback((function(){e&&r(window.innerWidth)}),[e]);return T((function(){if(e)return window.addEventListener("resize",i),i(),function(){return window.removeEventListener("resize",i)}}),[e,i]),t},L=function(e){var n=e.columnsCountBreakPoints,t=void 0===n?{350:1,750:2,900:3}:n,r=e.children,i=e.className,o=void 0===i?null:i,s=e.style,a=void 0===s?null:s,u=B(),l=c.useMemo((function(){var e=Object.keys(t).sort((function(e,n){return e-n})),n=e.length>0?t[e[0]]:N;return e.forEach((function(e){e<u&&(n=t[e])})),n}),[u,t]);return p.createElement("div",{className:o,style:a},p.Children.map(r,(function(e,n){return p.cloneElement(e,{key:n,columnsCount:l})})))};L.propTypes={};const D={600:1,1100:2,1600:3},A="Oh nos! Nothing to show!",w=20,W=e=>{const[n,t]=c.useState(w),[r,i]=c.useState([]),{list:o,onPinClick:s,selectedPin:u,viewport:l}=e;c.useEffect((()=>{t(w)}),[o]),c.useEffect((()=>{const e=o.sort(((e,n)=>{var t,r;return Date.parse((null==(t=n.creator)?void 0:t._lastActive)||"0")-Date.parse((null==(r=e.creator)?void 0:r._lastActive)||"0")})).slice(0,n).map((e=>{const n=e._id===(null==u?void 0:u._id);return a.jsx(O,{item:e,isSelectedPin:n,onPinClick:s,viewport:l},e._id)}));i(e)}),[n,o]);const p=r.length!==o.length,d=0===o.length,m=`${o.length} result${1==o.length?"":"s"} in view`,f=e.columnsCountBreakPoints||D;return a.jsxs(v,{"data-cy":`CardList-${l}`,sx:{flexDirection:"column",gap:2,padding:2},children:[a.jsxs(v,{sx:{justifyContent:"space-between",paddingX:2,paddingTop:2,fontSize:2},children:[a.jsx(I,{"data-cy":"list-results",children:m}),a.jsxs(v,{sx:{alignItems:"center",gap:1},children:[a.jsx(I,{children:" Most recently active"}),a.jsx(b,{glyph:"arrow-full-down"})]})]}),d&&A,!d&&a.jsxs(a.Fragment,{children:[a.jsx(L,{columnsCountBreakPoints:f,children:a.jsx(j,{children:r})}),p&&a.jsx(v,{sx:{justifyContent:"center"},children:a.jsx(S,{onClick:()=>t((e=>e+w)),children:"Show more "})})]})]})};W.__docgenInfo={description:"",methods:[],displayName:"CardList",props:{columnsCountBreakPoints:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: number]: number }",signature:{properties:[{key:{name:"number"},value:{name:"number",required:!0}}]}},description:""},list:{required:!0,tsType:{name:"Array",elements:[{name:"IMapPin"}],raw:"IMapPin[]"},description:""},onPinClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg: IMapPin) => void",signature:{arguments:[{type:{name:"IMapPin"},name:"arg"}],return:{name:"void"}}},description:""},selectedPin:{required:!0,tsType:{name:"union",raw:"IMapPin | undefined",elements:[{name:"IMapPin"},{name:"undefined"}]},description:""},viewport:{required:!0,tsType:{name:"string"},description:""}}};export{W as C};