import{j as a}from"./hoist-non-react-statics.cjs-CAIjOaGs.js";import{a as p,r as l}from"./index-BP8_t0zE.js";import{B as N}from"./Button-6xtNGWM4.js";import{C as O}from"./CardListItem-DhBPOkNb.js";import{I as T}from"./Icon-BH7RxEvD.js";import{F as g,T as I}from"./theme-ui-components.esm-Dh60mSfC.js";function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function R(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){return e.apply(this,arguments)||this}R(t,e);var n=t.prototype;return n.getColumns=function(){var e=this.props,t=e.children,n=e.columnsCount,r=Array.from({length:n},(function(){return[]}));return p.Children.forEach(t,(function(e,t){e&&p.isValidElement(e)&&r[t%n].push(e)})),r},n.renderColumns=function(){var e=this.props.gutter;return this.getColumns().map((function(t,n){return p.createElement("div",{key:n,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:e}},t.map((function(e){return e})))}))},n.render=function(){var e=this.props,t=e.gutter,n=e.className,r=e.style;return p.createElement("div",{style:w({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:t},r),className:n},this.renderColumns())},t}(p.Component);j.propTypes={},j.defaultProps={columnsCount:3,gutter:"0",className:null,style:{}};var B=1,S=typeof window<"u"?l.useLayoutEffect:l.useEffect,b=function(){var e=l.useState(!1),t=e[0],n=e[1];return S((function(){n(!0)}),[]),t},D=function(){var e=b(),t=l.useState(0),n=t[0],r=t[1],i=l.useCallback((function(){e&&r(window.innerWidth)}),[e]);return S((function(){if(e)return window.addEventListener("resize",i),i(),function(){return window.removeEventListener("resize",i)}}),[e,i]),n},k=function(e){var t=e.columnsCountBreakPoints,n=void 0===t?{350:1,750:2,900:3}:t,r=e.children,i=e.className,o=void 0===i?null:i,s=e.style,a=void 0===s?null:s,u=D(),c=l.useMemo((function(){var e=Object.keys(n).sort((function(e,t){return e-t})),t=e.length>0?n[e[0]]:B;return e.forEach((function(e){e<u&&(t=n[e])})),t}),[u,n]);return p.createElement("div",{className:o,style:a},p.Children.map(r,(function(e,t){return p.cloneElement(e,{key:t,columnsCount:c})})))};k.propTypes={};const W={600:1,1100:2,1600:3},$="Oh nos! Nothing to show!",_=20,L=e=>{const[t,n]=l.useState(_),[r,i]=l.useState([]),{list:o,onPinClick:s,selectedPin:u,viewport:c}=e;l.useEffect((()=>{n(_)}),[o]),l.useEffect((()=>{const e=o.sort(((e,t)=>{var n,r;return Date.parse((null==(n=t.creator)?void 0:n._lastActive)||"0")-Date.parse((null==(r=e.creator)?void 0:r._lastActive)||"0")})).slice(0,t).map((e=>{const t=e._id===(null==u?void 0:u._id);return a.jsx(O,{item:e,isSelectedPin:t,onPinClick:s,viewport:c},e._id)}));i(e)}),[t,o]);const p=r.length!==o.length,d=0===o.length,f=`${o.length} result${1==o.length?"":"s"} in view`,m=e.columnsCountBreakPoints||W;return a.jsxs(g,{"data-cy":`CardList-${c}`,sx:{flexDirection:"column",gap:2,padding:2},children:[a.jsxs(g,{sx:{justifyContent:"space-between",paddingX:2,paddingTop:2,fontSize:2},children:[a.jsx(I,{"data-cy":"list-results",children:f}),a.jsxs(g,{sx:{alignItems:"center",gap:1},children:[a.jsx(I,{children:" Most recently active"}),a.jsx(T,{glyph:"arrow-full-down"})]})]}),d&&$,!d&&a.jsxs(a.Fragment,{children:[a.jsx(k,{columnsCountBreakPoints:m,children:a.jsx(j,{children:r})}),p&&a.jsx(g,{sx:{justifyContent:"center"},children:a.jsx(N,{onClick:()=>n((e=>e+_)),children:"Show more "})})]})]})};try{L.displayName="CardList",L.__docgenInfo={description:"",displayName:"CardList",props:{columnsCountBreakPoints:{defaultValue:null,description:"",name:"columnsCountBreakPoints",required:!1,type:{name:"{ [key: number]: number; }"}},list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"IMapPin[]"}},onPinClick:{defaultValue:null,description:"",name:"onPinClick",required:!0,type:{name:"(arg: IMapPin) => void"}},selectedPin:{defaultValue:null,description:"",name:"selectedPin",required:!0,type:{name:"IMapPin | undefined"}},viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"string"}}}}}catch{}export{L as C};