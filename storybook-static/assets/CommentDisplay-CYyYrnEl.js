import{j as t}from"./jsx-runtime-CexXSJP5.js";import{B as h}from"./Button-BDXaB1Ju.js";import{d as b}from"./default_member-D4npYF8S.js";import{b as w,T as c,a as g,F as n}from"./theme-ui-components.esm-Cq1N8tMa.js";import{r as m}from"./index-BP8_t0zE.js";import{L as v}from"./LinkifyText-DxSi-NTn.js";import{r as C,t as j,D as S}from"./DisplayDate-0CQG0G5T.js";import{U as D}from"./Username-Czb60CDd.js";function A(e,t){C(2,arguments);var a=j(e),n=j(t),o=a.getTime()-n.getTime();return o>0?-1:o<0?1:o}const u=({name:e,photoUrl:a})=>t.jsx(w,{"data-cy":"commentAvatarImage",src:a??b,sx:{objectFit:"cover",width:["30px","50px"],height:["30px","50px"]},alt:e?`Avatar of ${e}`:"Avatar of comment author",loading:"lazy"});try{u.displayName="CommentAvatar",u.__docgenInfo={description:"",displayName:"CommentAvatar",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},photoUrl:{defaultValue:null,description:"",name:"photoUrl",required:!1,type:{name:"string"}}}}}catch{}const E=129,x=({body:e})=>{const a=m.createRef(),[n,o]=m.useState(0),[r,i]=m.useState(!1);m.useEffect((()=>{a.current&&o(a.current.scrollHeight)}),[a]);const d=r?"max-content":"128px";return t.jsxs(t.Fragment,{children:[t.jsx(c,{"data-cy":"comment-text","data-testid":"commentText",sx:{fontFamily:"body",lineHeight:1.3,maxHeight:d,overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:[2,3]},ref:a,children:t.jsx(v,{children:e})}),n>E&&t.jsx(c,{as:"a",onClick:()=>{i((e=>!e))},sx:{color:"gray",cursor:"pointer",fontSize:[2,3]},children:r?"Show less":"Show more"})]})};try{x.displayName="CommentBody",x.__docgenInfo={description:"",displayName:"CommentBody",props:{body:{defaultValue:null,description:"",name:"body",required:!0,type:{name:"string"}}}}}catch{}const T="The original comment got deleted",_=e=>{var a,o,r,i,d;const{comment:l,isEditable:s,itemType:m,setShowDeleteModal:p,setShowEditModal:y}=e;return l.deleted?t.jsx(g,{sx:{marginBottom:2,border:""+(l.highlighted?"2px dashed black":"none")},"data-cy":"deletedComment",children:t.jsxs(c,{sx:{color:"grey"},children:["[",T,"]"]})}):l.deleted?void 0:t.jsxs(n,{sx:{gap:2,flexGrow:1,border:""+(l.highlighted?"2px dashed black":"none")},children:[t.jsx(g,{"data-cy":"commentAvatar","data-testid":"commentAvatar",children:t.jsx(u,{name:null==(a=l.createdBy)?void 0:a.name,photoUrl:null==(o=l.createdBy)?void 0:o.photoUrl})}),t.jsx(n,{sx:{flexDirection:"column",flex:1},children:t.jsxs(n,{sx:{justifyContent:"space-between",flexDirection:"column",gap:2},children:[t.jsxs(n,{sx:{gap:2,flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"},children:[t.jsxs(n,{sx:{alignItems:"center",gap:2},children:[t.jsx(D,{user:{userName:(null==(r=l.createdBy)?void 0:r.username)||"",countryCode:null==(i=l.createdBy)?void 0:i.country,isVerified:null==(d=l.createdBy)?void 0:d.isVerified}}),t.jsxs(c,{sx:{fontSize:1,color:"darkGrey"},children:[l.modifiedAt&&A(l.createdAt,l.modifiedAt)>0&&"Edited ",t.jsx(S,{date:l.modifiedAt||l.createdAt})]})]}),s&&t.jsxs(n,{sx:{alignItems:"flex-end",gap:2},children:[t.jsx(h,{type:"button","data-cy":`${m}: edit button`,variant:"subtle",small:!0,icon:"edit",onClick:()=>y(!0),children:"edit"}),t.jsx(h,{type:"button","data-cy":`${m}: delete button`,variant:"subtle",small:!0,icon:"delete",onClick:()=>p(!0),children:"delete"})]})]}),t.jsx(x,{body:l.comment})]})})]})};try{_.displayName="CommentDisplay",_.__docgenInfo={description:"",displayName:"CommentDisplay",props:{comment:{defaultValue:null,description:"",name:"comment",required:!0,type:{name:"Comment"}},isEditable:{defaultValue:null,description:"",name:"isEditable",required:!0,type:{name:"boolean | undefined"}},itemType:{defaultValue:null,description:"",name:"itemType",required:!0,type:{name:"enum",value:[{value:'"ReplyItem"'},{value:'"CommentItem"'}]}},setShowDeleteModal:{defaultValue:null,description:"",name:"setShowDeleteModal",required:!0,type:{name:"(arg: boolean) => void"}},setShowEditModal:{defaultValue:null,description:"",name:"setShowEditModal",required:!0,type:{name:"(arg: boolean) => void"}}}}}catch{}export{_ as C};