import{j as e,r as i}from"./iframe-DcRPcggf.js";import{A as B}from"./ActionSet-B1ToBkrz.js";import{B as b}from"./Button-CHLtIpGq.js";import{d as A}from"./default_member-D4npYF8S.js";import{I as S,b as I,T as d,a as C,F as a}from"./theme-ui-components.esm-BmKkfoQf.js";import{L as D}from"./LinkifyText-DMlDVeNc.js";import{D as E}from"./DisplayDate-Cwe4y-uT.js";import{U as N}from"./Username-zFOAfLp3.js";const q=""+new URL("author-B-Cfy9t9.svg",import.meta.url).href,T=t=>{const{displayName:o,isCommentAuthor:n=!1,photoUrl:i}=t,r=o?`Avatar of ${o}`:"Avatar of comment author";return e.jsxs(e.Fragment,{children:[n&&e.jsx(S,{src:q,ml:1,mt:-10,sx:{marginLeft:["-10px","5px"],marginTop:["-35px","-35px"],width:["85px","85px"],zIndex:1,position:"absolute",pointerEvents:"none",maxWidth:"none"}}),e.jsx(I,{"data-cy":"commentAvatarImage",src:i??A,sx:{objectFit:"cover",width:["30px","50px"],height:["30px","50px"],...n&&{zIndex:2,position:"relative"}},alt:r,loading:"lazy"})]})};T.__docgenInfo={description:"",methods:[],displayName:"CommentAvatar",props:{displayName:{required:!1,tsType:{name:"string"},description:""},isCommentAuthor:{required:!1,tsType:{name:"boolean"},description:""},photoUrl:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};const M=129,v=({body:t})=>{const o=i.createRef(),[n,r]=i.useState(0),[a,s]=i.useState(!1);i.useEffect((()=>{o.current&&r(o.current.scrollHeight)}),[o]);const m=a?"max-content":"128px";return e.jsxs(e.Fragment,{children:[e.jsx(d,{"data-cy":"comment-text","data-testid":"commentText",sx:{fontFamily:"body",lineHeight:1.3,maxHeight:m,overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:[2,3]},ref:o,children:e.jsx(D,{children:t})}),n>M&&e.jsx(d,{as:"a",onClick:()=>{s((e=>!e))},sx:{color:"gray",cursor:"pointer",fontSize:[2,3]},children:a?"Show less":"Show more"})]})};v.__docgenInfo={description:"",methods:[],displayName:"CommentBody",props:{body:{required:!0,tsType:{name:"string"},description:""}}};const k=i.createContext({authors:[]}),R="The original comment got deleted",z=t=>{var o,n,r,s,m,l,c;const{comment:p,isEditable:u,itemType:x,setShowDeleteModal:y,setShowEditModal:h,followButton:f,followButtonIcon:g}=t,{authors:j}=i.useContext(k),w=""+(p.highlighted?"2px dashed black":"none");return p.deleted?e.jsx(C,{sx:{marginBottom:2,border:w},"data-cy":"deletedComment",children:e.jsxs(d,{sx:{color:"grey"},children:["[",R,"]"]})}):p.deleted?void 0:e.jsxs(a,{sx:{gap:2,flexGrow:1,border:w},"data-cy":p.highlighted?"highlighted-comment":"",children:[e.jsx(C,{"data-cy":"commentAvatar","data-testid":"commentAvatar",sx:{flexDirection:"column",position:"relative",display:"inline-block"},children:e.jsx(T,{displayName:null==(o=p.createdBy)?void 0:o.displayName,photoUrl:null==(n=p.createdBy)?void 0:n.photoUrl,isCommentAuthor:!(null==(r=p.createdBy)||!r.id)&&j.includes(null==(s=p.createdBy)?void 0:s.id)})}),e.jsx(a,{sx:{flexDirection:"column",flex:1},children:e.jsxs(a,{sx:{justifyContent:"space-between",flexDirection:"column",gap:2},children:[e.jsxs(a,{sx:{gap:2,flexDirection:"row",justifyContent:"space-between"},children:[e.jsxs(a,{sx:{alignItems:"center",gap:2},children:[e.jsx(N,{user:{userName:(null==(m=p.createdBy)?void 0:m.username)||"",countryCode:null==(l=p.createdBy)?void 0:l.country,isVerified:null==(c=p.createdBy)?void 0:c.isVerified}}),e.jsx(d,{sx:{fontSize:1,color:"darkGrey"},children:e.jsx(E,{createdAt:p.createdAt,modifiedAt:p.modifiedAt,showLabel:!1})})]}),e.jsxs(a,{children:[g,e.jsxs(B,{itemType:x,children:[f,u&&e.jsx(b,{type:"button","data-cy":`${x}: edit button`,variant:"subtle",icon:"edit",onClick:()=>h(!0),sx:{fontSize:1},children:"Edit"}),u&&e.jsx(b,{type:"button","data-cy":`${x}: delete button`,variant:"subtle",icon:"delete",onClick:()=>y(!0),sx:{fontSize:1},children:"Delete"})]})]})]}),e.jsx(v,{body:p.comment})]})})]})};z.__docgenInfo={description:"",methods:[],displayName:"CommentDisplay",props:{comment:{required:!0,tsType:{name:"Comment"},description:""},isEditable:{required:!0,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:""},itemType:{required:!0,tsType:{name:"union",raw:"'ReplyItem' | 'CommentItem'",elements:[{name:"literal",value:"'ReplyItem'"},{name:"literal",value:"'CommentItem'"}]},description:""},setShowDeleteModal:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"arg"}],return:{name:"void"}}},description:""},setShowEditModal:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"arg"}],return:{name:"void"}}},description:""},followButton:{required:!1,tsType:{name:"ReactNode"},description:""},followButtonIcon:{required:!1,tsType:{name:"ReactNode"},description:""}}};export{z as C};