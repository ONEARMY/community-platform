import{j as e}from"./jsx-runtime-CexXSJP5.js";import{r as q}from"./index-BP8_t0zE.js";import{B as E}from"./Button-C1Ojgool.js";import{B as j}from"./ButtonShowReplies-ZT7Vti7G.js";import{C as L}from"./CommentItem-Cl9aHhem.js";import{C as v}from"./CreateReply-C23RfNUx.js";import{n as S}from"./DiscussionTitle-SzGpbUup.js";import{I as w}from"./Icon-QQOudn0t.js";import{F as R,a as _}from"./theme-ui-components.esm-D5Q63Fx1.js";const V=10,I=n=>{const[t,i]=q.useState(!1),{comment:l,handleDelete:o,handleEditRequest:d,handleEdit:s,supportReplies:a,isLoggedIn:m,isReplies:r,maxLength:u,onSubmitReply:p}=n,{_id:c,_deleted:h,replies:g}=l,f=()=>e.jsx(j,{isShowReplies:t,replies:g||[],setIsShowReplies:()=>i(!t)});return!h||g&&0!==S(g)?e.jsxs(_,{sx:{backgroundColor:"white",borderRadius:1,padding:r?0:2},children:[e.jsx(L,{comment:l,handleEditRequest:d,handleDelete:o,handleEdit:s,isReply:!!r}),a&&!t&&f(),a&&t?e.jsxs(R,{sx:{alignItems:"stretch",flexDirection:"row"},children:[g&&e.jsx(_,{sx:{paddingTop:1,paddingRight:2},children:e.jsx(w,{glyph:"arrow-curved-bottom-right"})}),e.jsxs(R,{sx:{alignItems:"stretch",flexDirection:"column",flex:1},children:[e.jsx(b,{comments:g||[],handleDelete:o,handleEdit:s,handleEditRequest:d,isLoggedIn:m,isReplies:!0,maxLength:u,supportReplies:!1}),!h&&(()=>{if(p)return e.jsx(v,{commentId:c,isLoggedIn:m,maxLength:u,onSubmit:p})})(),f()]})]}):null]}):null},b=n=>{const{comments:t,handleDelete:i,handleEdit:l,handleEditRequest:o,highlightedCommentId:d,isLoggedIn:s,isReplies:a,maxLength:m,onMoreComments:r,onSubmitReply:u,supportReplies:p=!1}=n,[c,h]=q.useState(1),g=c*V;return q.useEffect((()=>{if(!d)return;const e=t.findIndex((e=>d.includes(e._id)));e>=0&&(h(Math.floor(e/V)+1),(e=>{setTimeout((()=>{var n;null==(n=document.getElementById(`comment:${e}`))||n.scrollIntoView({behavior:"smooth",block:"start"})}),0)})(d))}),[d,t]),e.jsxs(R,{sx:{gap:2,flexDirection:"column"},children:[t&&t.slice(0,g).map((n=>e.jsx(_,{"data-testid":"CommentList: item",sx:{border:""+(d===n._id?"2px dashed black":"none"),borderRadius:1},children:e.jsx(I,{comment:n,handleEditRequest:o,handleDelete:i,handleEdit:l,isLoggedIn:s,isReplies:a,maxLength:m,onSubmitReply:u,supportReplies:p})},n._id))),t&&t.length>g&&e.jsx(R,{children:e.jsx(E,{type:"button",sx:{margin:"0 auto"},variant:"outline",onClick:()=>{r&&r(),h(c+1)},children:"show more comments"})})]})};try{I.displayName="CommentContainer",I.__docgenInfo={description:"",displayName:"CommentContainer",props:{comment:{defaultValue:null,description:"",name:"comment",required:!0,type:{name:"IComment"}},handleCommentReply:{defaultValue:null,description:"",name:"handleCommentReply",required:!1,type:{name:"((commentId: string | null) => void)"}},supportReplies:{defaultValue:null,description:"",name:"supportReplies",required:!0,type:{name:"boolean"}},handleDelete:{defaultValue:null,description:"",name:"handleDelete",required:!0,type:{name:"(_id: string) => Promise<void>"}},handleEdit:{defaultValue:null,description:"",name:"handleEdit",required:!0,type:{name:"(_id: string, comment: string) => Promise<void>"}},handleEditRequest:{defaultValue:null,description:"",name:"handleEditRequest",required:!0,type:{name:"() => Promise<void>"}},isLoggedIn:{defaultValue:null,description:"",name:"isLoggedIn",required:!0,type:{name:"boolean"}},isReplies:{defaultValue:null,description:"",name:"isReplies",required:!0,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!0,type:{name:"number"}},onSubmitReply:{defaultValue:null,description:"",name:"onSubmitReply",required:!1,type:{name:"((_id: string, reply: string) => Promise<void>)"}}}}}catch{}try{b.displayName="CommentList",b.__docgenInfo={description:"",displayName:"CommentList",props:{supportReplies:{defaultValue:null,description:"",name:"supportReplies",required:!1,type:{name:"boolean"}},comments:{defaultValue:null,description:"",name:"comments",required:!0,type:{name:"IComment[]"}},highlightedCommentId:{defaultValue:null,description:"",name:"highlightedCommentId",required:!1,type:{name:"string"}},onMoreComments:{defaultValue:null,description:"",name:"onMoreComments",required:!1,type:{name:"(() => void)"}},setCommentBeingRepliedTo:{defaultValue:null,description:"",name:"setCommentBeingRepliedTo",required:!1,type:{name:"((commentId: string | null) => void)"}},handleDelete:{defaultValue:null,description:"",name:"handleDelete",required:!0,type:{name:"(_id: string) => Promise<void>"}},handleEdit:{defaultValue:null,description:"",name:"handleEdit",required:!0,type:{name:"(_id: string, comment: string) => Promise<void>"}},handleEditRequest:{defaultValue:null,description:"",name:"handleEditRequest",required:!0,type:{name:"() => Promise<void>"}},isLoggedIn:{defaultValue:null,description:"",name:"isLoggedIn",required:!0,type:{name:"boolean"}},isReplies:{defaultValue:null,description:"",name:"isReplies",required:!0,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!0,type:{name:"number"}},onSubmitReply:{defaultValue:null,description:"",name:"onSubmitReply",required:!1,type:{name:"((_id: string, reply: string) => Promise<void>)"}}}}}catch{}export{b as C};