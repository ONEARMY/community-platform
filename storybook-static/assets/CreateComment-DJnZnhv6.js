import{j as e}from"./jsx-runtime-CexXSJP5.js";import{r as C}from"./index-BP8_t0zE.js";import{s as _}from"./contact-DD4r1-LP.js";import{M as k}from"./MemberBadge-BQcPvDsK.js";import{L as V}from"./components-CyP20DXM.js";import{F as s,a as r,c as q,T as d,B as w,I}from"./theme-ui-components.esm-Cq1N8tMa.js";const m=n=>{const a=`${n.to}?returnUrl=${encodeURIComponent(null==location?void 0:location.pathname)}`;return e.jsx(V,{...n,to:a,children:n.children})};try{m.displayName="ReturnPathLink",m.__docgenInfo={description:"",displayName:"ReturnPathLink",props:{}}}catch{}const f=n=>{const[a,t]=C.useState(!1),{comment:i,isLoggedIn:o,isReply:l,maxLength:m,onSubmit:u,isLoading:c}=n,p=n.userProfileType||"member",h=n.placeholder||"Leave your questions or feedback...",x=n.buttonLabel??"Leave a comment",g=({parentNode:e,value:a})=>{e.dataset.replicatedValue=a,null==n||n.onChange(a)},f=i.length>0||a;return e.jsxs(s,{"data-target":"create-comment-container",sx:{gap:2},children:[e.jsx(r,{sx:{lineHeight:0,display:["none","block"],flexShrink:0},children:e.jsx(k,{profileType:p,useLowDetailVersion:!0})}),e.jsxs(r,{sx:{display:"block",background:"white",flex:1,marginLeft:[0,3],borderRadius:1,position:"relative",width:"min-content","&:before":{display:["none","block"],content:'""',position:"absolute",borderWidth:"1em 1em",borderStyle:"solid",borderColor:"transparent white transparent transparent",margin:".5em -2em"}},children:[!o&&e.jsx(R,{}),o&&e.jsxs(s,{sx:{flexDirection:"column"},children:[e.jsx(r,{className:"grow-wrap "+(f?"value-set":""),children:e.jsx(q,{value:i,maxLength:m,onChange:e=>{g&&g(e.target)},"aria-label":"Comment","data-cy":l?"reply-form":"comments-form",placeholder:h,rows:1,onFocus:()=>t(!0),onBlur:()=>t(!1)})}),e.jsxs(d,{sx:{fontSize:1,display:f?"flex":"none",alignSelf:"flex-end",padding:2},children:[i.length,"/",m]})]})]}),e.jsx(s,{sx:{alignSelf:"flex-end",height:["40px","52px"],width:["40px","auto"]},children:e.jsxs(w,{"data-cy":l?"reply-submit":"comment-submit","data-testid":"send-comment-button",disabled:!i.trim()||!o||c,variant:"primary",onClick:()=>{!c&&u(i)},sx:{height:["40px","100%"],width:["40px","auto"],padding:[0,1]},children:[c&&"Loading...",!c&&e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{display:["none","block"]},children:x}),e.jsx(I,{src:_,sx:{display:["block","none"],width:"22px",margin:"auto"}})]})]})})]})},R=()=>e.jsx(r,{sx:{padding:[3,4]},children:e.jsx(d,{"data-cy":"comments-login-prompt",children:e.jsx(m,{to:"/sign-in",style:{textDecoration:"underline",color:"inherit"},children:"Hi there! Login to leave a comment"})})});try{f.displayName="CreateComment",f.__docgenInfo={description:"",displayName:"CreateComment",props:{maxLength:{defaultValue:null,description:"",name:"maxLength",required:!0,type:{name:"number"}},isLoggedIn:{defaultValue:null,description:"",name:"isLoggedIn",required:!0,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isReply:{defaultValue:null,description:"",name:"isReply",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: string) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},comment:{defaultValue:null,description:"",name:"comment",required:!0,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},userProfileType:{defaultValue:null,description:"",name:"userProfileType",required:!1,type:{name:"enum",value:[{value:'"member"'},{value:'"space"'},{value:'"workspace"'},{value:'"machine-builder"'},{value:'"community-builder"'},{value:'"collection-point"'}]}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!1,type:{name:"string"}}}}}catch{}export{f as C};