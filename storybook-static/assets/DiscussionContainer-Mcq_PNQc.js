import{r as d,j as i}from"./iframe-Cnv6e--Z.js";import{C as b}from"./CommentList-B199iWMH.js";import{C as R}from"./CreateComment-DjETym5k.js";import{D as w}from"./DiscussionTitle-D_sgTdTq.js";import{F as p}from"./theme-ui-components.esm-DCqhxKwX.js";const P=e=>{const n=[],i={};for(const t of e)if(i[t._id]=t,t.parentCommentId){const e=i[t.parentCommentId];if(!e)continue;e.replies||(e.replies=[]),e.replies.push(t)}for(const t of e)t.parentCommentId||n.push(t);return n},I=e=>{const{comment:n,comments:t,handleDelete:r,handleEdit:s,handleEditRequest:m,onSubmitReply:o,highlightedCommentId:a,maxLength:u,onChange:g,onMoreComments:c,onSubmit:l,isLoggedIn:y,isSubmitting:h,supportReplies:f=!1}=e,[C,q]=d.useState(null),v=d.useMemo((()=>P(t)),[t]);return i.jsxs(p,{sx:{flexDirection:"column",gap:2},children:[i.jsx(w,{comments:t}),i.jsx(b,{supportReplies:f,comments:v,handleDelete:r,handleEdit:s,handleEditRequest:m,highlightedCommentId:a,isLoggedIn:y,isReplies:!1,maxLength:u,onMoreComments:c,onSubmitReply:o,setCommentBeingRepliedTo:e=>{q(e!==C?e:null)}}),i.jsx(p,{sx:{alignItems:"stretch",background:"softblue",borderRadius:2,flexDirection:"column",paddingY:3},children:i.jsx(R,{isLoading:h,maxLength:u,comment:n,onChange:g,onSubmit:l,isLoggedIn:y})})]})};I.__docgenInfo={description:"",methods:[],displayName:"DiscussionContainer",props:{comment:{required:!0,tsType:{name:"string"},description:""},comments:{required:!0,tsType:{name:"Array",elements:[{name:"IComment"}],raw:"IComment[]"},description:""},handleDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"(_id: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"_id"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},handleEdit:{required:!0,tsType:{name:"signature",type:"function",raw:"(_id: string, comment: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"_id"},{type:{name:"string"},name:"comment"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},handleEditRequest:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},highlightedCommentId:{required:!1,tsType:{name:"string"},description:""},isLoggedIn:{required:!0,tsType:{name:"boolean"},description:""},maxLength:{required:!0,tsType:{name:"number"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(comment: string) => void",signature:{arguments:[{type:{name:"string"},name:"comment"}],return:{name:"void"}}},description:""},onMoreComments:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(comment: string) => void",signature:{arguments:[{type:{name:"string"},name:"comment"}],return:{name:"void"}}},description:""},onSubmitReply:{required:!0,tsType:{name:"signature",type:"function",raw:"(_id: string, reply: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"_id"},{type:{name:"string"},name:"reply"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},isSubmitting:{required:!0,tsType:{name:"boolean"},description:""},supportReplies:{required:!1,tsType:{name:"boolean"},description:""}}};export{I as D};