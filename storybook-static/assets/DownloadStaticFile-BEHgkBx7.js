import{j as o}from"./iframe-hKNIfn5j.js";import{D as p}from"./DownloadButton-BY4LC_OP.js";import{E as u}from"./ExternalLink-CLaKDQo7.js";import{I as f}from"./Icon-D3mnePQc.js";import{T as g}from"./Tooltip-D89SVnue.js";import{F as l,T as s}from"./theme-ui-components.esm-DKTvS5i7.js";const w=e=>{const{name:n,glyph:i,size:r,redirectToSignIn:t}=e;return o.jsxs(o.Fragment,{children:[o.jsxs(l,{sx:{borderRadius:1,border:"2px solid black",background:"accent.base",color:"black",justifyContent:"space-between",alignItems:"center",flexDirection:"row",width:"300px",cursor:"pointer",padding:2,marginBottom:1},onClick:()=>t&&t(),"data-tooltip-id":"login-download","data-tooltip-content":t?"Login to download":"",children:[o.jsx(f,{size:24,glyph:i,mr:3}),o.jsx(s,{sx:{flex:1,fontSize:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginRight:3},children:n}),o.jsx(s,{sx:{fontSize:1},children:r})]}),o.jsx(g,{id:"login-download"})]})},x=e=>{const{file:n,fileDownloadCount:i,allowDownload:r,handleClick:t,redirectToSignIn:s,isLoggedIn:a}=e,d=h(n.size||0);if(!n)return null;const c=r&&n.url&&!s;return o.jsxs(l,{sx:{flexDirection:"column",gap:1},children:[c&&o.jsx(u,{onClick:()=>t&&t(),href:n.url,download:n.name,sx:{width:"300px",marginLeft:0,marginRight:1},children:o.jsx(w,{name:n.name,glyph:"download-cloud",size:d})}),o.jsx(p,{fileDownloadCount:i,glyph:"download-cloud",isLoggedIn:a,label:`${n.name} (${d})`,onClick:()=>t&&t()})]})},h=e=>{if(0===e)return"0 Bytes";const o=Number(Math.floor(Math.log(e)/Math.log(1024)));return(e/Math.pow(1024,o)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][o]};x.__docgenInfo={description:"",methods:[],displayName:"DownloadStaticFile",props:{file:{required:!0,tsType:{name:"MediaFile"},description:""},fileDownloadCount:{required:!1,tsType:{name:"number"},description:""},forDonationRequest:{required:!1,tsType:{name:"boolean"},description:""},isLoggedIn:{required:!1,tsType:{name:"boolean"},description:""},allowDownload:{required:!1,tsType:{name:"boolean"},description:""},handleClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},redirectToSignIn:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""}}};export{x as D};