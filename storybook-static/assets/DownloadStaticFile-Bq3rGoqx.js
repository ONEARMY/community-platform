import{j as o}from"./iframe-DcRPcggf.js";import{D as m}from"./DownloadButton-BnzbHjLu.js";import{E as p}from"./ExternalLink-CrOkmcZC.js";import{I as u}from"./Icon-BhgBWJRj.js";import{T as f}from"./Tooltip-CTIy4Idx.js";import{F as l,T as s}from"./theme-ui-components.esm-BmKkfoQf.js";const g=e=>{const{name:n,glyph:i,size:r,redirectToSignIn:t}=e;return o.jsxs(o.Fragment,{children:[o.jsxs(l,{sx:{borderRadius:1,border:"2px solid black",background:"accent.base",color:"black",justifyContent:"space-between",alignItems:"center",flexDirection:"row",width:"300px",cursor:"pointer",padding:2,marginBottom:1},onClick:()=>t&&t(),"data-tooltip-id":"login-download","data-tooltip-content":t?"Login to download":"",children:[o.jsx(u,{size:24,glyph:i,mr:3}),o.jsx(s,{sx:{flex:1,fontSize:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginRight:3},children:n}),o.jsx(s,{sx:{fontSize:1},children:r})]}),o.jsx(f,{id:"login-download"})]})},x=e=>{const{file:n,allowDownload:i,handleClick:r,redirectToSignIn:t,isLoggedIn:s}=e,a=w(n.size||0);if(!n)return null;const d=i&&n.url&&!t;return o.jsxs(l,{sx:{flexDirection:"column",gap:1},children:[d&&o.jsx(p,{onClick:()=>r&&r(),href:n.url,download:n.name,sx:{width:"300px",marginLeft:0,marginRight:1},children:o.jsx(g,{name:n.name,glyph:"download-cloud",size:a})}),o.jsx(m,{glyph:"download-cloud",isLoggedIn:s,label:`${n.name} (${a})`,onClick:()=>r&&r()})]})},w=e=>{if(0===e)return"0 Bytes";const o=Number(Math.floor(Math.log(e)/Math.log(1024)));return(e/Math.pow(1024,o)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][o]};x.__docgenInfo={description:"",methods:[],displayName:"DownloadStaticFile",props:{file:{required:!0,tsType:{name:"MediaFile"},description:""},fileDownloadCount:{required:!1,tsType:{name:"number"},description:""},forDonationRequest:{required:!1,tsType:{name:"boolean"},description:""},isLoggedIn:{required:!1,tsType:{name:"boolean"},description:""},allowDownload:{required:!1,tsType:{name:"boolean"},description:""},handleClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},redirectToSignIn:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""}}};export{x as D};