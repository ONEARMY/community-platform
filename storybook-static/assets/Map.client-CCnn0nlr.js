import{j as z}from"./jsx-runtime-CexXSJP5.js";import{a as _,r as N}from"./index-BP8_t0zE.js";import{_ as V}from"./extends-CF3RwP-h.js";import{_ as T}from"./objectWithoutPropertiesLoose-gpp6Tpz-.js";import{a as s}from"./setPrototypeOf-NYsvoNVB.js";import{_ as v}from"./inheritsLoose-CdQPfY07.js";import{_ as r}from"./defineProperty-Dr9G4DxF.js";import{l as m,M as W,L as R,b as D,w as F}from"./MapLayer-CeGLoV_-.js";var U=function(e){return void 0===e&&(e=""),e.split(" ").filter(Boolean)},k=function(e,t){U(t).forEach((function(t){m.DomUtil.addClass(e,t)}))},I=function(e,t){U(t).forEach((function(t){m.DomUtil.removeClass(e,t)}))};const S=function(e,t,o){null!=e&&o!==t&&(null!=t&&t.length>0&&I(e,t),null!=o&&o.length>0&&k(e,o))};var j=function(e){function t(){return e.apply(this,arguments)||this}v(t,e);var o=t.prototype;return o.createLeafletElement=function(e){return new m.GridLayer(this.getOptions(e))},o.updateLeafletElement=function(e,t){var o=t.opacity,n=t.zIndex;o!==e.opacity&&this.leafletElement.setOpacity(o),n!==e.zIndex&&this.leafletElement.setZIndex(n)},o.getOptions=function(t){var o=V({},e.prototype.getOptions.call(this,t)),n=t.leaflet.map;return null!=n&&(null==o.maxZoom&&null!=n.options.maxZoom&&(o.maxZoom=n.options.maxZoom),null==o.minZoom&&null!=n.options.minZoom&&(o.minZoom=n.options.minZoom)),o},o.render=function(){return null},t}(W);function A(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];return Object.keys(e).reduce((function(t,n){return-1===o.indexOf(n)&&(t[n]=e[n]),t}),{})}var q=["children","className","id","style","useFlyTo","whenReady"],B=function(e){return Array.isArray(e)?[e[0],e[1]]:[e.lat,e.lon?e.lon:e.lng]},$=function(e){function t(t){var o;return o=e.call(this,t)||this,r(s(o),"className",void 0),r(s(o),"contextValue",void 0),r(s(o),"container",void 0),r(s(o),"viewport",{center:void 0,zoom:void 0}),r(s(o),"_ready",!1),r(s(o),"_updating",!1),r(s(o),"onViewportChange",(function(){var e=o.leafletElement.getCenter();o.viewport={center:e?[e.lat,e.lng]:void 0,zoom:o.leafletElement.getZoom()},o.props.onViewportChange&&!o._updating&&o.props.onViewportChange(o.viewport)})),r(s(o),"onViewportChanged",(function(){o.props.onViewportChanged&&!o._updating&&o.props.onViewportChanged(o.viewport)})),r(s(o),"bindContainer",(function(e){o.container=e})),o.className=t.className,o}v(t,e);var o=t.prototype;return o.createLeafletElement=function(e){var t=e.viewport,o=T(e,["viewport"]);return t&&(t.center&&(o.center=t.center),"number"==typeof t.zoom&&(o.zoom=t.zoom)),new m.Map(this.container,o)},o.updateLeafletElement=function(e,t){this._updating=!0;var o=t.bounds,n=t.boundsOptions,l=t.boxZoom,i=t.center,s=t.className,a=t.doubleClickZoom,r=t.dragging,m=t.keyboard,p=t.maxBounds,u=t.scrollWheelZoom,h=t.tap,d=t.touchZoom,f=t.useFlyTo,c=t.viewport,g=t.zoom;if(S(this.container,e.className,s),c&&c!==e.viewport){var y=c.center?c.center:i,E=null==c.zoom?g:c.zoom;!0===f?this.leafletElement.flyTo(y,E,this.getZoomPanOptions(t)):this.leafletElement.setView(y,E,this.getZoomPanOptions(t))}else i&&this.shouldUpdateCenter(i,e.center)?!0===f?this.leafletElement.flyTo(i,g,this.getZoomPanOptions(t)):this.leafletElement.setView(i,g,this.getZoomPanOptions(t)):"number"==typeof g&&g!==e.zoom&&(null==e.zoom?this.leafletElement.setView(i,g,this.getZoomPanOptions(t)):this.leafletElement.setZoom(g,this.getZoomPanOptions(t)));p&&this.shouldUpdateBounds(p,e.maxBounds)&&this.leafletElement.setMaxBounds(p),o&&(this.shouldUpdateBounds(o,e.bounds)||n!==e.boundsOptions)&&(!0===f?this.leafletElement.flyToBounds(o,this.getFitBoundsOptions(t)):this.leafletElement.fitBounds(o,this.getFitBoundsOptions(t))),l!==e.boxZoom&&(!0===l?this.leafletElement.boxZoom.enable():this.leafletElement.boxZoom.disable()),a!==e.doubleClickZoom&&(!0===a||"string"==typeof a?(this.leafletElement.options.doubleClickZoom=a,this.leafletElement.doubleClickZoom.enable()):this.leafletElement.doubleClickZoom.disable()),r!==e.dragging&&(!0===r?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),m!==e.keyboard&&(!0===m?this.leafletElement.keyboard.enable():this.leafletElement.keyboard.disable()),u!==e.scrollWheelZoom&&(!0===u||"string"==typeof u?(this.leafletElement.options.scrollWheelZoom=u,this.leafletElement.scrollWheelZoom.enable()):this.leafletElement.scrollWheelZoom.disable()),h!==e.tap&&(!0===h?this.leafletElement.tap.enable():this.leafletElement.tap.disable()),d!==e.touchZoom&&(!0===d||"string"==typeof d?(this.leafletElement.options.touchZoom=d,this.leafletElement.touchZoom.enable()):this.leafletElement.touchZoom.disable()),this._updating=!1},o.getZoomPanOptions=function(e){return{animate:e.animate,duration:e.duration,easeLinearity:e.easeLinearity,noMoveStart:e.noMoveStart}},o.getFitBoundsOptions=function(e){var t=this.getZoomPanOptions(e);return V({},t,e.boundsOptions)},o.componentDidMount=function(){var t=A.apply(void 0,[this.props].concat(q));this.leafletElement=this.createLeafletElement(t),this.leafletElement.on("move",this.onViewportChange),this.leafletElement.on("moveend",this.onViewportChanged),null!=t.bounds&&this.leafletElement.fitBounds(t.bounds,this.getFitBoundsOptions(t)),this.contextValue={layerContainer:this.leafletElement,map:this.leafletElement},e.prototype.componentDidMount.call(this),this.forceUpdate()},o.componentDidUpdate=function(t){!1===this._ready&&(this._ready=!0,this.props.whenReady&&this.leafletElement.whenReady(this.props.whenReady)),e.prototype.componentDidUpdate.call(this,t),this.updateLeafletElement(t,this.props)},o.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.leafletElement.off("move",this.onViewportChange),this.leafletElement.off("moveend",this.onViewportChanged),!0===this.props.preferCanvas?(this.leafletElement._initEvents(!0),this.leafletElement._stop()):this.leafletElement.remove()},o.shouldUpdateCenter=function(e,t){return!t||(e=B(e),t=B(t),e[0]!==t[0]||e[1]!==t[1])},o.shouldUpdateBounds=function(e,t){return!t||!m.latLngBounds(e).equals(m.latLngBounds(t))},o.render=function(){return _.createElement("div",{className:this.className,id:this.props.id,ref:this.bindContainer,style:this.props.style},this.contextValue?_.createElement(R,{value:this.contextValue},this.props.children):null)},t}(D),G=function(e){function t(){return e.apply(this,arguments)||this}v(t,e);var o=t.prototype;return o.createLeafletElement=function(e){return new m.TileLayer(e.url,this.getOptions(e))},o.updateLeafletElement=function(t,o){e.prototype.updateLeafletElement.call(this,t,o),o.url!==t.url&&this.leafletElement.setUrl(o.url)},t}(j);const H=F(G),Z=N.forwardRef(((e,t)=>{const{children:o,setZoom:n}=e;return z.jsxs($,{ref:t,onViewportChanged:e=>{e.zoom&&n(e.zoom)},...e,children:[z.jsx(H,{attribution:'&copy <a href="http://osm.org/copyright" target="_blank" rel="noopener noreferrer">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o]})}));Z.displayName="Map";try{Z.displayName="Map",Z.__docgenInfo={description:"",displayName:"Map",props:{setZoom:{defaultValue:null,description:"",name:"setZoom",required:!0,type:{name:"(arg: number) => void"}}}}}catch{}export{Z as M};