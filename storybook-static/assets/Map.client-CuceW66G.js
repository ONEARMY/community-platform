import{R,r as M,j as x}from"./iframe-DcRPcggf.js";import{_ as B}from"./extends-CF3RwP-h.js";import{_ as T}from"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import{_ as s,a as r}from"./defineProperty-2NbBxhLa.js";import{l as m,_ as Z,M as _,L as W,a as j,w as D}from"./MapLayer-Cpp50Xog.js";var V=function(e){return void 0===e&&(e=""),e.split(" ").filter(Boolean)},F=function(e,t){V(t).forEach((function(t){m.DomUtil.addClass(e,t)}))},k=function(e,t){V(t).forEach((function(t){m.DomUtil.removeClass(e,t)}))};const I=function(e,t,o){null!=e&&o!==t&&(null!=t&&t.length>0&&k(e,t),null!=o&&o.length>0&&F(e,o))};var S=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e);var o=t.prototype;return o.createLeafletElement=function(e){return new m.GridLayer(this.getOptions(e))},o.updateLeafletElement=function(e,t){var o=t.opacity,n=t.zIndex;o!==e.opacity&&this.leafletElement.setOpacity(o),n!==e.zIndex&&this.leafletElement.setZIndex(n)},o.getOptions=function(t){var o=B({},e.prototype.getOptions.call(this,t)),n=t.leaflet.map;return null!=n&&(null==o.maxZoom&&null!=n.options.maxZoom&&(o.maxZoom=n.options.maxZoom),null==o.minZoom&&null!=n.options.minZoom&&(o.minZoom=n.options.minZoom)),o},o.render=function(){return null},t}(_);function A(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];return Object.keys(e).reduce((function(t,n){return-1===o.indexOf(n)&&(t[n]=e[n]),t}),{})}var q=["children","className","id","style","useFlyTo","whenReady"],z=function(e){return Array.isArray(e)?[e[0],e[1]]:[e.lat,e.lon?e.lon:e.lng]},$=function(e){function t(t){var o;return o=e.call(this,t)||this,s(r(o),"className",void 0),s(r(o),"contextValue",void 0),s(r(o),"container",void 0),s(r(o),"viewport",{center:void 0,zoom:void 0}),s(r(o),"_ready",!1),s(r(o),"_updating",!1),s(r(o),"onViewportChange",(function(){var e=o.leafletElement.getCenter();o.viewport={center:e?[e.lat,e.lng]:void 0,zoom:o.leafletElement.getZoom()},o.props.onViewportChange&&!o._updating&&o.props.onViewportChange(o.viewport)})),s(r(o),"onViewportChanged",(function(){o.props.onViewportChanged&&!o._updating&&o.props.onViewportChanged(o.viewport)})),s(r(o),"bindContainer",(function(e){o.container=e})),o.className=t.className,o}Z(t,e);var o=t.prototype;return o.createLeafletElement=function(e){var t=e.viewport,o=T(e,["viewport"]);return t&&(t.center&&(o.center=t.center),"number"==typeof t.zoom&&(o.zoom=t.zoom)),new m.Map(this.container,o)},o.updateLeafletElement=function(e,t){this._updating=!0;var o=t.bounds,n=t.boundsOptions,a=t.boxZoom,l=t.center,i=t.className,s=t.doubleClickZoom,r=t.dragging,m=t.keyboard,p=t.maxBounds,u=t.scrollWheelZoom,c=t.tap,h=t.touchZoom,d=t.useFlyTo,f=t.viewport,g=t.zoom;if(I(this.container,e.className,i),f&&f!==e.viewport){var y=f.center?f.center:l,E=null==f.zoom?g:f.zoom;!0===d?this.leafletElement.flyTo(y,E,this.getZoomPanOptions(t)):this.leafletElement.setView(y,E,this.getZoomPanOptions(t))}else l&&this.shouldUpdateCenter(l,e.center)?!0===d?this.leafletElement.flyTo(l,g,this.getZoomPanOptions(t)):this.leafletElement.setView(l,g,this.getZoomPanOptions(t)):"number"==typeof g&&g!==e.zoom&&(null==e.zoom?this.leafletElement.setView(l,g,this.getZoomPanOptions(t)):this.leafletElement.setZoom(g,this.getZoomPanOptions(t)));p&&this.shouldUpdateBounds(p,e.maxBounds)&&this.leafletElement.setMaxBounds(p),o&&(this.shouldUpdateBounds(o,e.bounds)||n!==e.boundsOptions)&&(!0===d?this.leafletElement.flyToBounds(o,this.getFitBoundsOptions(t)):this.leafletElement.fitBounds(o,this.getFitBoundsOptions(t))),a!==e.boxZoom&&(!0===a?this.leafletElement.boxZoom.enable():this.leafletElement.boxZoom.disable()),s!==e.doubleClickZoom&&(!0===s||"string"==typeof s?(this.leafletElement.options.doubleClickZoom=s,this.leafletElement.doubleClickZoom.enable()):this.leafletElement.doubleClickZoom.disable()),r!==e.dragging&&(!0===r?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),m!==e.keyboard&&(!0===m?this.leafletElement.keyboard.enable():this.leafletElement.keyboard.disable()),u!==e.scrollWheelZoom&&(!0===u||"string"==typeof u?(this.leafletElement.options.scrollWheelZoom=u,this.leafletElement.scrollWheelZoom.enable()):this.leafletElement.scrollWheelZoom.disable()),c!==e.tap&&(!0===c?this.leafletElement.tap.enable():this.leafletElement.tap.disable()),h!==e.touchZoom&&(!0===h||"string"==typeof h?(this.leafletElement.options.touchZoom=h,this.leafletElement.touchZoom.enable()):this.leafletElement.touchZoom.disable()),this._updating=!1},o.getZoomPanOptions=function(e){return{animate:e.animate,duration:e.duration,easeLinearity:e.easeLinearity,noMoveStart:e.noMoveStart}},o.getFitBoundsOptions=function(e){var t=this.getZoomPanOptions(e);return B({},t,e.boundsOptions)},o.componentDidMount=function(){var t=A.apply(void 0,[this.props].concat(q));this.leafletElement=this.createLeafletElement(t),this.leafletElement.on("move",this.onViewportChange),this.leafletElement.on("moveend",this.onViewportChanged),null!=t.bounds&&this.leafletElement.fitBounds(t.bounds,this.getFitBoundsOptions(t)),this.contextValue={layerContainer:this.leafletElement,map:this.leafletElement},e.prototype.componentDidMount.call(this),this.forceUpdate()},o.componentDidUpdate=function(t){!1===this._ready&&(this._ready=!0,this.props.whenReady&&this.leafletElement.whenReady(this.props.whenReady)),e.prototype.componentDidUpdate.call(this,t),this.updateLeafletElement(t,this.props)},o.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.leafletElement.off("move",this.onViewportChange),this.leafletElement.off("moveend",this.onViewportChanged),!0===this.props.preferCanvas?(this.leafletElement._initEvents(!0),this.leafletElement._stop()):this.leafletElement.remove()},o.shouldUpdateCenter=function(e,t){return!t||(e=z(e),t=z(t),e[0]!==t[0]||e[1]!==t[1])},o.shouldUpdateBounds=function(e,t){return!t||!m.latLngBounds(e).equals(m.latLngBounds(t))},o.render=function(){return R.createElement("div",{className:this.className,id:this.props.id,ref:this.bindContainer,style:this.props.style},this.contextValue?R.createElement(W,{value:this.contextValue},this.props.children):null)},t}(j),G=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e);var o=t.prototype;return o.createLeafletElement=function(e){return new m.TileLayer(e.url,this.getOptions(e))},o.updateLeafletElement=function(t,o){e.prototype.updateLeafletElement.call(this,t,o),o.url!==t.url&&this.leafletElement.setUrl(o.url)},t}(S);const H=D(G),N=M.forwardRef(((e,t)=>{const{children:o,setZoom:n}=e;return x.jsxs($,{ref:t,onViewportChanged:e=>{e.zoom&&n(e.zoom)},...e,children:[x.jsx(H,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),o]})}));N.displayName="Map",N.__docgenInfo={description:"",methods:[],displayName:"Map",props:{setZoom:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg: number) => void",signature:{arguments:[{type:{name:"number"},name:"arg"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"union",raw:"React.ReactNode | React.ReactNode[]",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"}]},description:""},ref:{required:!1,tsType:{name:"union",raw:"RefObject<LeafletMap> | undefined",elements:[{name:"RefObject",elements:[{name:"LeafletMap"}],raw:"RefObject<LeafletMap>"},{name:"undefined"}]},description:""}},composes:["MapProps"]};export{N as M};