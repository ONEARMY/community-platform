import{R as p,r as c,j as a}from"./iframe-BOUvZuaW.js";import{B as S}from"./Button-CtMKAE2Y.js";import{C as O}from"./CardListItem-DSeXG4Q2.js";import{I as R}from"./Icon-Cn5Wsj2O.js";import{r as b,t as P}from"./index-Cn2wB4rc.js";import{F as v,T as _}from"./theme-ui-components.esm-qkJ5jO88.js";function k(e,t){b(2,arguments);var n=P(e),r=P(t),i=n.getTime()-r.getTime();return i>0?-1:i<0?1:i}function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var n=t.prototype;return n.getColumns=function(){var e=this.props,t=e.children,n=e.columnsCount,r=Array.from({length:n},(function(){return[]}));return p.Children.forEach(t,(function(e,t){e&&p.isValidElement(e)&&r[t%n].push(e)})),r},n.renderColumns=function(){var e=this.props.gutter;return this.getColumns().map((function(t,n){return p.createElement("div",{key:n,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:e}},t.map((function(e){return e})))}))},n.render=function(){var e=this.props,t=e.gutter,n=e.className,r=e.style;return p.createElement("div",{style:E({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:t},r),className:n},this.renderColumns())},t}(p.Component);M.propTypes={},M.defaultProps={columnsCount:3,gutter:"0",className:null,style:{}};var N=1,T=typeof window<"u"?c.useLayoutEffect:c.useEffect,D=function(){var e=c.useState(!1),t=e[0],n=e[1];return T((function(){n(!0)}),[]),t},B=function(){var e=D(),t=c.useState(0),n=t[0],r=t[1],i=c.useCallback((function(){e&&r(window.innerWidth)}),[e]);return T((function(){if(e)return window.addEventListener("resize",i),i(),function(){return window.removeEventListener("resize",i)}}),[e,i]),n},L=function(e){var t=e.columnsCountBreakPoints,n=void 0===t?{350:1,750:2,900:3}:t,r=e.children,i=e.className,s=void 0===i?null:i,o=e.style,a=void 0===o?null:o,u=B(),l=c.useMemo((function(){var e=Object.keys(n).sort((function(e,t){return e-t})),t=e.length>0?n[e[0]]:N;return e.forEach((function(e){e<u&&(t=n[e])})),t}),[u,n]);return p.createElement("div",{className:s,style:a},p.Children.map(r,(function(e,t){return p.cloneElement(e,{key:t,columnsCount:l})})))};L.propTypes={};const A={600:1,1100:2,1600:3},q="Oh nos! Nothing to show!",w=20,W=e=>{const[t,n]=c.useState(w),[r,i]=c.useState([]),{list:s,onPinClick:o,selectedPin:u,viewport:l}=e;c.useEffect((()=>{n(w)}),[s]),c.useEffect((()=>{const e=s.sort(((e,t)=>k(e.profile.lastActive||Date.parse("0"),t.profile.lastActive||Date.parse("0")))).slice(0,t).map((e=>{const t=e.id===(null==u?void 0:u.id);return a.jsx(O,{item:e,isSelectedPin:t,onPinClick:o,viewport:l},e.id)}));i(e)}),[t,s]);const p=r.length!==s.length,m=0===s.length,d=`${s.length} result${1==s.length?"":"s"} in view`,f=e.columnsCountBreakPoints||A;return a.jsxs(v,{"data-cy":`CardList-${l}`,sx:{flexDirection:"column",gap:2,padding:2},children:[a.jsxs(v,{sx:{justifyContent:"space-between",paddingX:2,paddingTop:2,fontSize:2},children:[a.jsx(_,{"data-cy":"list-results",children:d}),a.jsxs(v,{sx:{alignItems:"center",gap:1},children:[a.jsx(_,{children:" Most recently active"}),a.jsx(R,{glyph:"arrow-full-down"})]})]}),m&&q,!m&&a.jsxs(a.Fragment,{children:[a.jsx(L,{columnsCountBreakPoints:f,children:a.jsx(M,{children:r})}),p&&a.jsx(v,{sx:{justifyContent:"center"},children:a.jsx(S,{onClick:()=>n((e=>e+w)),children:"Show more "})})]})]})};W.__docgenInfo={description:"",methods:[],displayName:"MapCardList",props:{columnsCountBreakPoints:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: number]: number }",signature:{properties:[{key:{name:"number"},value:{name:"number",required:!0}}]}},description:""},list:{required:!0,tsType:{name:"Array",elements:[{name:"MapPin"}],raw:"MapPin[]"},description:""},onPinClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg: MapPin) => void",signature:{arguments:[{type:{name:"MapPin"},name:"arg"}],return:{name:"void"}}},description:""},selectedPin:{required:!1,tsType:{name:"union",raw:"MapPin | null",elements:[{name:"MapPin"},{name:"null"}]},description:""},viewport:{required:!0,tsType:{name:"string"},description:""}}};export{W as M};