import{j as a}from"./jsx-runtime-CexXSJP5.js";import{r as c}from"./index-BP8_t0zE.js";import{B as x}from"./Button-DeEOnrl-.js";import{M as y}from"./Map.client-D7Zd9Rir.js";import{O as L}from"./OsmGeocoding-TTt5Flth.js";import{M as E}from"./MapPin.client-D-pmCJQR.js";import{_ as p}from"./inheritsLoose-CdQPfY07.js";import{w as _,l as j}from"./MapLayer-CeGLoV_-.js";import{a as b}from"./setPrototypeOf-NYsvoNVB.js";import{_ as v}from"./defineProperty-Dr9G4DxF.js";import{F as m,A as C,T as M,a as P}from"./theme-ui-components.esm-DCiJ1mMX.js";var U=function(e){function t(t){var o;return o=e.call(this,t)||this,v(b(o),"leafletElement",void 0),o.leafletElement=o.createLeafletElement(o.props),o}p(t,e);var o=t.prototype;return o.createLeafletElement=function(e){throw new Error("createLeafletElement() must be implemented")},o.updateLeafletElement=function(e,t){t.position!==e.position&&this.leafletElement.setPosition(t.position)},o.componentDidMount=function(){this.leafletElement.addTo(this.props.leaflet.map)},o.componentDidUpdate=function(e){this.updateLeafletElement(e,this.props)},o.componentWillUnmount=function(){this.leafletElement.remove()},o.render=function(){return null},t}(c.Component),z=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.createLeafletElement=function(e){return new j.Control.Zoom(e)},t}(U);const w=_(z),k="Use my current location",q="You can click on the map, or drag the marker to adjust it's position.",u=e=>{const[t,o]=c.useState(e.zoom||1),[n,i]=c.useState(e.center||[e.position.lat,e.position.lng]),{draggable:r,position:l}=e,s=e.hasUserLocation||!1,p=e.updatePosition||function(){};return a.jsxs(m,{sx:{flexDirection:"column",gap:2},children:[r&&a.jsx(C,{variant:"info",sx:{marginTop:2},children:a.jsx(M,{sx:{fontSize:1},children:q})}),a.jsxs("div",{style:{position:"relative",borderRadius:6,overflow:"hidden"},children:[a.jsx(P,{sx:{position:"absolute",top:0,left:0,padding:2,zIndex:2},children:r&&a.jsxs(m,{style:{width:"280px"},children:[a.jsx(L,{callback:e=>{e.lat&&e.lon&&(p({lat:e.lat,lng:e.lon}),i([e.lat,e.lon]),o(15))},countrycodes:"",acceptLanguage:"en"}),s&&a.jsx(x,{type:"button",mx:2,onClick:e=>{e.preventDefault(),navigator.geolocation.getCurrentPosition((e=>{p({lat:e.coords.latitude,lng:e.coords.longitude}),i([e.coords.latitude,e.coords.longitude]),o(15)}),(()=>{}))},children:k})]})}),a.jsxs(y,{center:n,zoom:t,zoomControl:!1,setZoom:o,onclick:e=>{p({...e.latlng})},style:{height:"300px",zIndex:1},children:[a.jsx(w,{position:"topright"}),a.jsx(E,{position:l,draggable:r,ondragend:e=>{e.lat&&e.lng&&p({lat:e.lat,lng:e.lng})}})]})]})]})};try{u.displayName="MapWithPin",u.__docgenInfo={description:"",displayName:"MapWithPin",props:{position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"{ lat: number; lng: number; }"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!0,type:{name:"boolean"}},updatePosition:{defaultValue:null,description:"",name:"updatePosition",required:!1,type:{name:"any"}},center:{defaultValue:null,description:"",name:"center",required:!1,type:{name:"any"}},zoom:{defaultValue:null,description:"",name:"zoom",required:!1,type:{name:"number"}},hasUserLocation:{defaultValue:null,description:"",name:"hasUserLocation",required:!1,type:{name:"boolean"}}}}}catch{}export{u as M};