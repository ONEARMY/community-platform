import{r as c,j as o}from"./iframe-DcRPcggf.js";import{B as b}from"./Button-CHLtIpGq.js";import{M as j}from"./Map.client-CuceW66G.js";import{O as v}from"./OsmGeocoding-B2PFHnSe.js";import{M as E}from"./MapPin.client-BbDq6jmR.js";import{_ as u,w as L,l as T}from"./MapLayer-Cpp50Xog.js";import{_ as C,a as k}from"./defineProperty-2NbBxhLa.js";import{F as m,A as M,T as w,a as R}from"./theme-ui-components.esm-BmKkfoQf.js";var q=function(e){function t(t){var o;return o=e.call(this,t)||this,C(k(o),"leafletElement",void 0),o.leafletElement=o.createLeafletElement(o.props),o}u(t,e);var o=t.prototype;return o.createLeafletElement=function(e){throw new Error("createLeafletElement() must be implemented")},o.updateLeafletElement=function(e,t){t.position!==e.position&&this.leafletElement.setPosition(t.position)},o.componentDidMount=function(){this.leafletElement.addTo(this.props.leaflet.map)},o.componentDidUpdate=function(e){this.updateLeafletElement(e,this.props)},o.componentWillUnmount=function(){this.leafletElement.remove()},o.render=function(){return null},t}(c.Component),P=function(e){function t(){return e.apply(this,arguments)||this}return u(t,e),t.prototype.createLeafletElement=function(e){return new T.Control.Zoom(e)},t}(q);const D=L(P),I="Use my current location",U="To move your pin, grab it to move it or double click where you want it to go.",_=e=>{const[t,n]=c.useState(e.zoom||1),[i,r]=c.useState(e.center||[e.position.lat,e.position.lng]),{mapRef:a,position:s,markerIcon:l,onClickMapPin:p,popup:u}=e,d=e.hasUserLocation||!1,f=e.updatePosition||function(){};return o.jsxs(m,{sx:{flexDirection:"column",gap:2},children:[o.jsx(M,{variant:"info",sx:{marginTop:2},children:o.jsx(w,{sx:{fontSize:1},children:U})}),o.jsxs("div",{style:{position:"relative",borderRadius:6,overflow:"hidden"},children:[o.jsx(R,{sx:{position:"absolute",zIndex:2,padding:4,top:0,right:0,display:"flex",justifyContent:"center",alignItems:"center"},children:o.jsxs(m,{style:{width:"280px"},children:[o.jsx(v,{callback:e=>{e.lat&&e.lon&&(f({lat:e.lat,lng:e.lon}),r([e.lat,e.lon]),n(15))},acceptLanguage:"en"}),d&&o.jsx(b,{type:"button",mx:2,onClick:e=>{e.preventDefault(),navigator.geolocation.getCurrentPosition((e=>{f({lat:e.coords.latitude,lng:e.coords.longitude}),r([e.coords.latitude,e.coords.longitude]),n(15)}),(()=>{}))},children:I})]})}),o.jsxs(j,{ref:a,className:"markercluster-map settings-page",center:i,zoom:t,zoomControl:!1,setZoom:n,ondblclick:e=>{f({...e.latlng})},doubleClickZoom:!1,style:{height:"500px",zIndex:1},children:[o.jsx(D,{position:"topleft"}),o.jsxs(o.Fragment,{children:[u,s&&o.jsx(E,{position:s,markerIcon:l,onClick:p,onDrag:e=>{e.lat&&e.lng&&f({lat:e.lat,lng:e.lng})}})]})]})]})]})};_.__docgenInfo={description:"",methods:[],displayName:"MapWithPin",props:{mapRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<MapType>",elements:[{name:"MapType"}]},description:""},position:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  lat: number\n  lng: number\n}",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:""},markerIcon:{required:!1,tsType:{name:"DivIcon"},description:""},updatePosition:{required:!1,tsType:{name:"any"},description:""},center:{required:!1,tsType:{name:"any"},description:""},zoom:{required:!1,tsType:{name:"number"},description:""},hasUserLocation:{required:!1,tsType:{name:"boolean"},description:""},onClickMapPin:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},popup:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{_ as M};