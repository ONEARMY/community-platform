import{j as n}from"./jsx-runtime-CexXSJP5.js";import{r as c}from"./index-BP8_t0zE.js";import{B as E}from"./Button-D4nxT_g_.js";import{M as C}from"./Map.client-D7Zd9Rir.js";import{O as M}from"./OsmGeocoding-BSwlbkyl.js";import{M as j}from"./MapPin.client-Ln2WLe_W.js";import{_ as d}from"./inheritsLoose-CdQPfY07.js";import{w as b,l as v}from"./MapLayer-CeGLoV_-.js";import{a as _}from"./setPrototypeOf-NYsvoNVB.js";import{_ as k}from"./defineProperty-Dr9G4DxF.js";import{F as m,A as P,T as I,a as U}from"./theme-ui-components.esm-BngKL4Rx.js";var q=function(e){function t(t){var n;return n=e.call(this,t)||this,k(_(n),"leafletElement",void 0),n.leafletElement=n.createLeafletElement(n.props),n}d(t,e);var n=t.prototype;return n.createLeafletElement=function(e){throw new Error("createLeafletElement() must be implemented")},n.updateLeafletElement=function(e,t){t.position!==e.position&&this.leafletElement.setPosition(t.position)},n.componentDidMount=function(){this.leafletElement.addTo(this.props.leaflet.map)},n.componentDidUpdate=function(e){this.updateLeafletElement(e,this.props)},n.componentWillUnmount=function(){this.leafletElement.remove()},n.render=function(){return null},t}(c.Component),w=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t.prototype.createLeafletElement=function(e){return new v.Control.Zoom(e)},t}(q);const z=b(w),D="Use my current location",V="To move your pin, grab it to move it or double click where you want it to go.",u=e=>{const[t,o]=c.useState(e.zoom||1),[i,a]=c.useState(e.center||[e.position.lat,e.position.lng]),{mapRef:r,position:l,markerIcon:s,onClickMapPin:p,popup:u}=e,d=e.hasUserLocation||!1,f=e.updatePosition||function(){};return n.jsxs(m,{sx:{flexDirection:"column",gap:2},children:[n.jsx(P,{variant:"info",sx:{marginTop:2},children:n.jsx(I,{sx:{fontSize:1},children:V})}),n.jsxs("div",{style:{position:"relative",borderRadius:6,overflow:"hidden"},children:[n.jsx(U,{sx:{position:"absolute",zIndex:2,padding:4,top:0,right:0,display:"flex",justifyContent:"center",alignItems:"center"},children:n.jsxs(m,{style:{width:"280px"},children:[n.jsx(M,{callback:e=>{e.lat&&e.lon&&(f({lat:e.lat,lng:e.lon}),a([e.lat,e.lon]),o(15))},acceptLanguage:"en"}),d&&n.jsx(E,{type:"button",mx:2,onClick:e=>{e.preventDefault(),navigator.geolocation.getCurrentPosition((e=>{f({lat:e.coords.latitude,lng:e.coords.longitude}),a([e.coords.latitude,e.coords.longitude]),o(15)}),(()=>{}))},children:D})]})}),n.jsxs(C,{ref:r,className:"markercluster-map settings-page",center:i,zoom:t,zoomControl:!1,setZoom:o,ondblclick:e=>{f({...e.latlng})},doubleClickZoom:!1,style:{height:"500px",zIndex:1},children:[n.jsx(z,{position:"topleft"}),n.jsxs(n.Fragment,{children:[u,l&&n.jsx(j,{position:l,markerIcon:s,onClick:p,onDrag:e=>{e.lat&&e.lng&&f({lat:e.lat,lng:e.lng})}})]})]})]})]})};try{u.displayName="MapWithPin",u.__docgenInfo={description:"",displayName:"MapWithPin",props:{mapRef:{defaultValue:null,description:"",name:"mapRef",required:!0,type:{name:"RefObject<Map<MapProps, Map>>"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"{ lat: number; lng: number; }"}},markerIcon:{defaultValue:null,description:"",name:"markerIcon",required:!1,type:{name:"DivIcon"}},updatePosition:{defaultValue:null,description:"",name:"updatePosition",required:!1,type:{name:"any"}},center:{defaultValue:null,description:"",name:"center",required:!1,type:{name:"any"}},zoom:{defaultValue:null,description:"",name:"zoom",required:!1,type:{name:"number"}},hasUserLocation:{defaultValue:null,description:"",name:"hasUserLocation",required:!1,type:{name:"boolean"}},onClickMapPin:{defaultValue:null,description:"",name:"onClickMapPin",required:!1,type:{name:"(() => void)"}},popup:{defaultValue:null,description:"",name:"popup",required:!1,type:{name:"ReactNode"}}}}}catch{}export{u as M};