import{r as x,j as e}from"./iframe-DeSZYuJ6.js";import{B as a}from"./Button-0wFDFd8H.js";import{B as g}from"./ButtonIcon-Dx-lKbsC.js";import{I as b}from"./InternalLink-PgP1C5rx.js";import{L as h}from"./Loader-D_Mr85Wg.js";import{N as k}from"./NotificationItemSupabase-ij6Ms8ms.js";import{F as n,H as y,a as j}from"./theme-ui-components.esm-DJ3E_AZV.js";const w=i=>{const[t,o]=x.useState(!0),{isUpdatingNotifications:s,markAllRead:r,markRead:d,modalDismiss:l,notifications:c}=i,u=c.filter((({isRead:e})=>!e)).length>0,m=c.filter((({isRead:e})=>t?!e:!e||e)).sort(((e,i)=>e.date<i.date?1:-1));return e.jsxs(n,{"data-cy":"NotificationListSupabase",sx:{flexDirection:"column",gap:4},children:[e.jsxs(n,{sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(y,{sx:{fontSize:6},children:"Notifications"}),e.jsx(g,{"data-cy":"MapFilterList-CloseButton",icon:"close",onClick:l,sx:{border:"none",paddingLeft:2,paddingRight:3}})]}),e.jsxs(n,{sx:{justifyContent:"space-between",alignItems:"center",flexDirection:"row",gap:2},children:[e.jsxs(n,{sx:{alignItems:"center",gap:2},children:[e.jsxs(n,{sx:{border:"2px solid",borderRadius:2,overflow:"hidden",backgroundColor:"black",gap:"2px"},children:[e.jsx(a,{onClick:()=>o(!0),variant:"subtle",sx:{backgroundColor:t?"activeYellow":"white",borderRadius:0,":hover":{backgroundColor:t?"activeYellow":"white",textDecoration:t?"none":"underline"}},children:"Unread"}),e.jsx(a,{"data-testid":"NotificationListSupabase-ShowAll",onClick:()=>o(!1),variant:"subtle",sx:{backgroundColor:t?"white":"activeYellow",borderRadius:0,":hover":{backgroundColor:t?"white":"activeYellow",textDecoration:t?"underline":"none"}},children:"All"})]}),u&&e.jsx(a,{"data-testid":"NotificationListSupabase-MarkAllRead",onClick:r,disabled:s,icon:"doubleTick",variant:"outline",children:"Mark all read"})]}),e.jsx(b,{to:"/settings/notifications",children:e.jsx(a,{icon:"account",variant:"outline",sx:{alignSelf:"flex-end"},onClick:l,showIconOnly:!0,children:"Update preferences"})})]}),s&&e.jsx(h,{}),!s&&m.map(((i,n)=>e.jsx(k,{markRead:d,modalDismiss:l,notification:i},n))),0===m.length&&!s&&e.jsx(j,{sx:{backgroundColor:"background",borderRadius:2,padding:4,textAlign:"center"},children:"Wow... No unread notifications!"})]})};w.__docgenInfo={description:"",methods:[],displayName:"NotificationListSupabase",props:{isUpdatingNotifications:{required:!0,tsType:{name:"boolean"},description:""},markAllRead:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},markRead:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: number) => void",signature:{arguments:[{type:{name:"number"},name:"id"}],return:{name:"void"}}},description:""},modalDismiss:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},notifications:{required:!0,tsType:{name:"Array",elements:[{name:"NotificationDisplay"}],raw:"NotificationDisplay[]"},description:""}}};export{w as N};