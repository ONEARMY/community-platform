import{r as d,g as c,R as m,c as y,b as f}from"./iframe-ixGCZEPn.js";import"../sb-preview/runtime.js";var P=Object.defineProperty,g=(t,e,r)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,r=(t,e,r)=>(g(t,"symbol"!=typeof e?e+"":e,r),r);const b="https://w.soundcloud.com/player/api.js",R="SC";class o extends d.Component{constructor(){super(...arguments),r(this,"callPlayer",y),r(this,"duration",null),r(this,"currentTime",null),r(this,"fractionLoaded",null),r(this,"mute",(()=>{this.setVolume(0)})),r(this,"unmute",(()=>{null!==this.props.volume&&this.setVolume(this.props.volume)})),r(this,"ref",(t=>{this.iframe=t}))}componentDidMount(){this.props.onMount&&this.props.onMount(this)}load(t,e){c(b,R).then((r=>{if(!this.iframe)return;const{PLAY:s,PLAY_PROGRESS:i,PAUSE:o,FINISH:a,ERROR:n}=r.Widget.Events;e||(this.player=r.Widget(this.iframe),this.player.bind(s,this.props.onPlay),this.player.bind(o,(()=>{this.duration-this.currentTime<.05||this.props.onPause()})),this.player.bind(i,(t=>{this.currentTime=t.currentPosition/1e3,this.fractionLoaded=t.loadedProgress})),this.player.bind(a,(()=>this.props.onEnded())),this.player.bind(n,(t=>this.props.onError(t)))),this.player.load(t,{...this.props.config.options,callback:()=>{this.player.getDuration((t=>{this.duration=t/1e3,this.props.onReady()}))}})}))}play(){this.callPlayer("play")}pause(){this.callPlayer("pause")}stop(){}seekTo(t,e=!0){this.callPlayer("seekTo",1e3*t),e||this.pause()}setVolume(t){this.callPlayer("setVolume",100*t)}getDuration(){return this.duration}getCurrentTime(){return this.currentTime}getSecondsLoaded(){return this.fractionLoaded*this.duration}render(){const{display:t}=this.props,e={width:"100%",height:"100%",display:t};return m.createElement("iframe",{ref:this.ref,src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(this.props.url)}`,style:e,frameBorder:0,allow:"autoplay"})}}r(o,"displayName","SoundCloud"),r(o,"canPlay",f.soundcloud),r(o,"loopOnEnded",!0);export{o as default};