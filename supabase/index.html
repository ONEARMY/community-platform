<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-supabase" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">What is Supabase? | OneArmy Community Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.platform.onearmy.earth/supabase"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="What is Supabase? | OneArmy Community Platform"><meta data-rh="true" name="description" content="Supabase is an open source Firebase alternative, based on Postgres."><meta data-rh="true" property="og:description" content="Supabase is an open source Firebase alternative, based on Postgres."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.platform.onearmy.earth/supabase"><link data-rh="true" rel="alternate" href="https://docs.platform.onearmy.earth/supabase" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.platform.onearmy.earth/supabase" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.55ec4173.css">
<script src="/assets/js/runtime~main.731c6a9a.js" defer="defer"></script>
<script src="/assets/js/main.12180532.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OneArmy Community Platform</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ONEARMY/community-platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>What is Supabase?</h1></header>
<p>Supabase is an open source Firebase alternative, based on Postgres.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-supabase-instance">Local supabase instance<a href="#local-supabase-instance" class="hash-link" aria-label="Direct link to Local supabase instance" title="Direct link to Local supabase instance">​</a></h3>
<p>To install the supabase locally, follow <a href="https://supabase.com/docs/guides/local-development/cli/getting-started?queryGroups=platform&amp;platform=windows" target="_blank" rel="noopener noreferrer">https://supabase.com/docs/guides/local-development/cli/getting-started?queryGroups=platform&amp;platform=windows</a>
Installing as a dev dependency doesn&#x27;t always work well, so it is recommended to install for your OS.</p>
<p>Install Docker Desktop.
Make sure you have the docker app open.</p>
<p>Run <code>supabase start</code> (Ensure you run it on the project folder root.)
Run <code>supabase status</code>
Create a .env.local file at the project root (same level as .env) and fill in the keys with values from the command above:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUPABASE_API_URL=&lt;API URL&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUPABASE_KEY=&lt;anon key&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUPABASE_SERVICE_ROLE_KEY=&lt;service_role key&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run <code>yarn db:seed</code> to run the DB migration scripts and update your local database schema. You will have to run this again whenever there are DB schema changes.</p>
<p>Now you can start the project with <code>yarn start</code>.
To sign-up locally, you can get the email confirmation link at <a href="http://localhost:54324/monitor" target="_blank" rel="noopener noreferrer">http://localhost:54324/monitor</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-local-supabase">Updating local supabase<a href="#updating-local-supabase" class="hash-link" aria-label="Direct link to Updating local supabase" title="Direct link to Updating local supabase">​</a></h3>
<p><a href="https://supabase.com/docs/guides/local-development/cli/getting-started?queryGroups=platform&amp;platform=macos#updating-the-supabase-cli" target="_blank" rel="noopener noreferrer">https://supabase.com/docs/guides/local-development/cli/getting-started?queryGroups=platform&amp;platform=macos#updating-the-supabase-cli</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-online-supabase-free-version">Using online Supabase free version<a href="#using-online-supabase-free-version" class="hash-link" aria-label="Direct link to Using online Supabase free version" title="Direct link to Using online Supabase free version">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-supabase-instance">Create your Supabase instance<a href="#create-your-supabase-instance" class="hash-link" aria-label="Direct link to Create your Supabase instance" title="Direct link to Create your Supabase instance">​</a></h4>
<p>You can also use the online Supabase free version.
For this, create your Supabase account at <a href="https://supabase.com" target="_blank" rel="noopener noreferrer">https://supabase.com</a> and create a new project.
Install the Supabase CLI : <a href="https://supabase.com/docs/guides/local-development/cli/getting-started" target="_blank" rel="noopener noreferrer">https://supabase.com/docs/guides/local-development/cli/getting-started</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="link-your-supabase-instance-and-push-the-db-schema">Link your Supabase instance and push the db schema<a href="#link-your-supabase-instance-and-push-the-db-schema" class="hash-link" aria-label="Direct link to Link your Supabase instance and push the db schema" title="Direct link to Link your Supabase instance and push the db schema">​</a></h4>
<p>First, connect to the Supabase CLI using <code>supabase login</code>.
Get your project-id from your Supabase project, you can find it in the project settings general section.
Now from the project root, run <code>supabase link --project-ref your-project-id</code>.
Finally, push your schema using <code>supabase db push</code>.</p>
<p>To finish you should fill the .env.local file with the values from the &quot;Data API&quot; section of your project settings:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUPABASE_API_URL=&lt;API URL&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUPABASE_KEY=&lt;anon key&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUPABASE_SERVICE_ROLE_KEY=&lt;service_role key&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrations">Migrations<a href="#migrations" class="hash-link" aria-label="Direct link to Migrations" title="Direct link to Migrations">​</a></h2>
<p>We use Supabase Declarative Schemas feature.
Schema changes must be made in the /supabase/schemas folder, following the current pattern (1 sql file per feature).
After making the schema changes, a migration file needs to be generated, use this command:
<code>supabase db diff --file [migration_name]</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-cypress-tests">Running Cypress Tests<a href="#running-cypress-tests" class="hash-link" aria-label="Direct link to Running Cypress Tests" title="Direct link to Running Cypress Tests">​</a></h2>
<p>Create a .env.local file at the packages/cypress folder
SUPABASE_API_URL=your_api_key (probably <a href="http://127.0.0.1:54321" target="_blank" rel="noopener noreferrer">http://127.0.0.1:54321</a>)
SUPABASE_KEY=your_key
SUPABASE_SERVICE_ROLE_KEY=your service key</p>
<p>All done! Tests will use your local database. More info about how it works below.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supabase-edge-functions">Supabase Edge Functions<a href="#supabase-edge-functions" class="hash-link" aria-label="Direct link to Supabase Edge Functions" title="Direct link to Supabase Edge Functions">​</a></h2>
<p>Currently used for customizing Auth Emails.
Supabase Auth Hooks have a timeout of 5 seconds which can easily be exceeded. To reduce the risk, the <code>resend</code> call is not awaited.
If it is exceeded, the user gets an error on the UI, but still receives the email and can continue his flow.
Haven&#x27;t managed to run the functions locally yet (contributions welcome!).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cypress-with-supabase">Cypress with Supabase<a href="#cypress-with-supabase" class="hash-link" aria-label="Direct link to Cypress with Supabase" title="Direct link to Cypress with Supabase">​</a></h3>
<p>Running cypress tests locally will use the local database, while running on CI will use the QA database.
For each test run, a new tenant_id is generated, which has a few benefits:</p>
<ul>
<li>ensures no conflicts between parallel test runs</li>
<li>easier to cleanup</li>
<li>if the data isn&#x27;t cleaned for some reason, it won&#x27;t affect other runs
For each test file, there should be a <code>before</code> and <code>after</code> block to, respectively, seed and clean the database.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-firebase-sync-testingdebugging">Local firebase sync testing/debugging<a href="#local-firebase-sync-testingdebugging" class="hash-link" aria-label="Direct link to Local firebase sync testing/debugging" title="Direct link to Local firebase sync testing/debugging">​</a></h3>
<p><em>This is temporary until we fully migrate to supabase!</em>
We can create and deploy the sync function to the firebase dev environment.
Then, using ngrok, expose our local supabase url to the internet, and point the firebase function to it.
(ngrok http <a href="http://127.0.0.1:54321" target="_blank" rel="noopener noreferrer">http://127.0.0.1:54321</a>)</p>
<p>To authenticate, we need to create these 3 secrets, for each firebase project:
firebase functions:secrets<!-- -->:set<!-- --> SUPABASE_API_URL
firebase functions:secrets<!-- -->:set<!-- --> SUPABASE_API_KEY
firebase functions:secrets<!-- -->:set<!-- --> TENANT_ID
(Check values with firebase functions:secrets<!-- -->:access<!-- --> SECRET_NAME)</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ONEARMY/community-platform/edit/master/packages/documentation/docs/supabase.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a><ul><li><a href="#local-supabase-instance" class="table-of-contents__link toc-highlight">Local supabase instance</a></li><li><a href="#updating-local-supabase" class="table-of-contents__link toc-highlight">Updating local supabase</a></li><li><a href="#using-online-supabase-free-version" class="table-of-contents__link toc-highlight">Using online Supabase free version</a></li></ul></li><li><a href="#migrations" class="table-of-contents__link toc-highlight">Migrations</a></li><li><a href="#running-cypress-tests" class="table-of-contents__link toc-highlight">Running Cypress Tests</a></li><li><a href="#supabase-edge-functions" class="table-of-contents__link toc-highlight">Supabase Edge Functions</a><ul><li><a href="#cypress-with-supabase" class="table-of-contents__link toc-highlight">Cypress with Supabase</a></li><li><a href="#local-firebase-sync-testingdebugging" class="table-of-contents__link toc-highlight">Local firebase sync testing/debugging</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Style Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/gJ7Yyk4" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ONEARMY/community-platform" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025</div></div></div></footer></div>
</body>
</html>